option task = {name: "test", every: 1m}

from(bucket: "training")
    |> range(start: -15m)
    |> filter(fn: (r) => r._measurement == "cpu" and r._field == "usage_system" and r.cpu == "cpu-total")
==============================
from(bucket: "training")
    |> range(start: -1h)
    |> filter(fn: (r) => r._measurement == "cpu" and r._field == "usage_system" and r.cpu == "cpu-total")
    |> window(every: 5m)
============================================
from(bucket: "training")
  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)
  |> filter(fn: (r) => r["_measurement"] == "disk")
  |> filter(fn: (r) => r["device"] == "sdc")
  |> filter(fn: (r) => r["host"] == "telegraf-polling-service")
  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)
  |> yield(name: "mean")

===========================================

// Data source
from(bucket: "training")
    |> range(start: -30m)
    |> filter(fn: (r) => r._measurement == "cpu")
    // Data processing
    |> aggregateWindow(every: 5m, fn: mean)
    // Data destination
    |> to(bucket: "example-downsampled")
===================================
from(bucket: "training")
  |> range(start: -30m)
  |> filter(fn: (r) => r["_measurement"] == "disk")
  |> aggregateWindow(every: 5m, fn: mean)
  |> to(bucket: "diskused-aggregation")
